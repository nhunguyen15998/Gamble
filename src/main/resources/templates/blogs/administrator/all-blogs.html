<htmllang="en" xmlns:th="http://www.thymeleaf.org"  >
<head th:replace="layouts/admin :: importLibs">
</head>
<body class="app sidebar-mini ltr transparent-mode bg-img1" data-new-gr-c-s-check-loaded="14.1071.0" data-gr-ext-installed="">
  <div class="horizontalMenucontainer">
    
    <div th:replace="layouts/admin :: switcher-wrapper"></div>
    <div th:replace="layouts/admin :: global-loader"></div>
    
    <div class="page">
        <div class="page-main is-expanded">
             <div th:replace="layouts/admin :: app-header"></div>
             <div th:replace="layouts/admin :: sticky"></div>
              <!--app-content open-->
              <div class="main-content app-content mt-0">

                <div class="side-app">
                    <!-- CONTAINER -->
                  <div class="main-container container-fluid">
                        <!-- PAGE-HEADER -->
                    <div class="page-header">
                        <h1 class="page-title">
                    Blogs</h1>
                    <div>
                        <ol class="breadcrumb">
                        <li class="breadcrumb-item">
                    <a href="javascript:void(0)">
                    Home</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">
                    Blogs</li>
                    </ol>
                    </div>
                    </div>
                 
                    <div class="row">
                        <div class="col-12 col-sm-12">
                        <div class="card">
                        <div class="card-header">
                        <h3 class="card-title mb-0">Information
                       </h3>
                      </div>
                       <div class="card-body pt-4">
                        <div class="grid-margin">
                        <div class="">
                        <div class="panel panel-primary">
                        <div class="tab-menu-heading border-0 p-0">
                        <div class="tabs-menu1">
                       <div class="alert" id="msg" style="display: none;"  th:text="${successMsg}?:${errorMsg}" th:classappend="${successMsg}?'alert-success':(${errorMsg}?'alert-danger':'')"></div>
                        <!-- Tabs -->
                       
                      </div>
                      </div>
                       <div class="panel-body tabs-menu-body border-0 pt-0">
                        <div class="tab-content">
                        <div class="tab-pane active">
                        <div class="table-responsive">
                        <div id="data-table_wrapper" class="dataTables_wrapper dt-bootstrap5 no-footer">
                       <div class="row">
                       <div class="col-sm-12 col-md-6">
                       <div class="dataTables_length" id="data-table_length">
                       <label>
                       Show <select class="form-select" style="width:60px;font-size:15px;padding:0 5px; text-align:center" id="take-record">
                            <option value="10" style="background-color:#8677d3; opacity: 0.2;">10</option>
                            <option value="20" style="background-color:#8677d3; opacity: 0.2;">20</option>
                            <option value="40" style="background-color:#8677d3; opacity: 0.2;">40</option>
                            <option value="100" style="background-color:#8677d3; opacity: 0.2;">100</option>
                     </select>
                        entries</label>
                       
                     </div>
                     
                    </div>
                      <div class="col-sm-12 col-md-6">
                       <div id="data-table_filter" class="dataTables_filter">
                        <label style="width:450px">
                         <input type="text" class="form-control" style="width: 75%;float:right;" placeholder="Search by title, url slug, author name,..." id="search-by-cond" aria-controls="data-table">
                         <span style="width:11%;float:right" onclick="ClearFilter();"><li  class="icons-list-item" style="height:70%;cursor: pointer;" ><i class="fa fa-history" style="pointer-events: none;"></i></li></span>
                         
                         <span style="width:11%;float:right;height:50px;" >
                          <li class="icons-list-item" style="height:80%;cursor: pointer;" onclick="window.location.href='/admin/blogs/create'"><i class="fa fa-plus" style="pointer-events: none;"></i></li>
                           </span> 
                        </label>
                     </div>
                     </div>
                     </div>
                      <div class="row">
                       <div class="col-sm-12">
                       <table id="data-table" class="table table-bordered text-nowrap mb-0 dataTable no-footer" role="grid" aria-describedby="data-table_info">
                        <thead class="border-top">
                       <tr role="row">
                       <th class="bg-transparent border-bottom-0 sorting_disabled" style="width: 15.725px;" rowspan="1" colspan="1" aria-label="Tracking Id">
                        #</th>
                       <th class="bg-transparent border-bottom-0 sorting" tabindex="0" aria-controls="data-table" rowspan="1" colspan="1" aria-label=" Product: activate to sort column ascending" style="width: 159.825px;">
                        Title</th>
                       <th class="bg-transparent border-bottom-0 sorting" tabindex="0" aria-controls="data-table" rowspan="1" colspan="1" aria-label=" Date: activate to sort column ascending" style="width: 89.2px;">
                        Blog category</th>
                       <th class="bg-transparent border-bottom-0 sorting_disabled" rowspan="1" colspan="1" aria-label=" Amount" style="width: 99.7875px;">
                        Created time</th>
                       <th class="bg-transparent border-bottom-0 sorting_disabled" rowspan="1" colspan="1" aria-label=" Payment Mode" style="width: 139.038px;">
                        Author</th>
                       <th class="bg-transparent border-bottom-0 sorting" style="width: 67.7375px;" tabindex="0" aria-controls="data-table" rowspan="1" colspan="1" aria-label="Status: activate to sort column ascending">
                       Status</th>
                       <th class="bg-transparent border-bottom-0 sorting" style="width: 51.6375px;" tabindex="0" aria-controls="data-table" rowspan="1" colspan="1" aria-label="Action: activate to sort column ascending">
                       Action</th>
                     </tr>
                      </thead>
                        <tbody>
                        <!-- <tr th:each="b, row : ${blogs}" class="border-bottom odd table-item">
                          <td class="text-center">
                            <div class="mt-0 mt-sm-2 d-block">
                            <h6 class="mb-0 fs-14 fw-semibold" th:text="${(row.index)+1}">
                            </h6>
                          </div>
                      </td>
                       <td>
                        <div class="d-flex">
                      
                        <div class="ms-3 mt-0 mt-sm-2 d-block">
                        <h6 class="mb-0 fs-14 fw-semibold" th:text="${b.title}"></h6>
                      </div>
                      </div>
                      </td>
                       
                       <td>
                       <span class="mt-sm-2 d-block" th:text="${b.blogCate}">1</span>
                     </td>
                       <td>
                       <span class="fw-semibold mt-sm-2 d-block" th:text="${b.created_at}"></span>
                      </td>
                       <td>
                        <div class="d-flex">
                        <div class="mt-0 mt-sm-3 d-block">
                        <h6 class="mb-0 fs-14 fw-semibold" th:text="${b.author_name}"></h6>
                      </div>
                      </div>
                      </td>
                       <td>
                        <div class="mt-sm-1 d-block">
                        <span class="badge bg-success-transparent rounded-pill p-2 px-3" th:classappend="${b.status==1?'text-success':''}" th:text="${b.status==1?'Activated':'Deactivated'}">
                       </span>
                      </div>
                      </td>
                       <td>
                        <div class="g-2">
                        <a th:href="@{'/admin/blogs/update?id='+${b.id}}" class="btn text-primary btn-sm" data-bs-original-title="Edit">
                       <span class="fe fe-edit fs-14">
       
                      </span>
                     </a>
                     <span class="btn text-danger btn-sm" data-bs-original-title="Delete">
                      <span class="fe fe-trash-2 fs-14">
                      </span>
                    </span>
                      </div>
                      </td>
                     </tr> -->
                        </tbody>
                       </table>
                        </div>
                        </div>
                        <div class="row">
                          <div class="col-sm-12 col-md-12">
                              <div class="dataTables_info" id="data-table_info" role="status" aria-live="polite"></div>
                          </div>
                          <div class="col-sm-12 col-md-12">
                              <div class="dataTables_paginate paging_simple_numbers" id="data-table_paginate">
                                  <ul class="pagination" id="paginations">
                                    <li class="paginate_button page-item previous" id="data-table_previous" data-page="prev"><span  aria-controls="data-table" data-dt-idx="0" tabindex="0" class="page-link">Previous</span>
                                    </li>
                                    <th:block th:each="page : ${#numbers.sequence(1, paging==0?1:paging)}">
                                     
                                      <li class="paginate_button page-item active" data-page="1" th:if="${page==1}">
                                        <span class="page-link">1</span>
                                      </li>
                                    <li class="paginate_button page-item" th:if="${page!=1}" th:data-page="'page-'+${page}">
                                      <span class="page-link" th:text="${page}"></span>
                                    </li>
                                    </th:block>
                                    <li class="paginate_button page-item next" id="data-table_next" data-page="next"><span aria-controls="data-table" data-dt-idx="2" tabindex="0" class="page-link">Next</span>
                                    </li>
                                  </ul>
                              </div>
                          </div>
                      </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div>
                        </div><!-- ROW-4 END -->
                        </div>
                 <!-- CONTAINER END -->
                </div>
              </div>
            <!--app-content close-->
            
        </div>
        
                 <!-- CONTAINER END -->
                 </div>
              </div>
            <!--app-content close-->
            
        </div>
            <div th:replace="layouts/admin :: sidebar-right"></div>
            <div th:replace="layouts/admin :: country-selector"></div>
            <footer th:replace="layouts/admin :: footer" ></footer>
    </div>
    

    <a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>
    <svg id="SvgjsSvg1001" width="2" height="0" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" style="overflow: hidden; top: -100%; left: -100%; position: absolute; opacity: 0;">
      <defs id="SvgjsDefs1002"></defs>
      <polyline id="SvgjsPolyline1003" points="0,0"></polyline>
      <path id="SvgjsPath1004" d="M0 0 "></path>
    </svg>
    

 <!-- JQUERY JS -->
  
  <noscript>
  
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  
  </noscript>
  
  <script src="/assets/js/jquery.min.js">
  </script>
  <script type="text/javascript">
  </script>
  
  <!-- BOOTSTRAP JS -->
  
  <noscript>
  
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  
  </noscript>
  <script src="/assets/plugins/bootstrap/js/popper.min.js">
  </script>
  
  <script type="text/javascript">
  
  
  </script>
  
  <noscript>
  
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  
  </noscript>
  
  <script src="/assets/plugins/bootstrap/js/bootstrap.min.js">
  </script>
  
  <script type="text/javascript">
  
  </script>
  
  <!-- SPARKLINE JS-->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/js/jquery.sparkline.min.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <!-- Sticky js -->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/js/sticky.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <!-- CHART-CIRCLE JS-->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script type="text/javascript">
  
  </script>
  <!-- PIETY CHART JS-->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/plugins/peitychart/jquery.peity.min.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/plugins/peitychart/peitychart.init.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <!-- SIDEBAR JS -->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/plugins/sidebar/sidebar.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <!-- Perfect SCROLLBAR JS-->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/plugins/p-scroll/perfect-scrollbar.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/plugins/p-scroll/pscroll.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script src="/assets/plugins/p-scroll/pscroll-1.js">
  </script>
  <script type="text/javascript">
  
  </script>
  <!-- INTERNAL CHARTJS CHART JS-->
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  <script type="text/javascript">
  
  </script>
  <noscript>
  <p>
  To display this page you need a browser that supports JavaScript.</p>
  </noscript>
  
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/chart/utils.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- INTERNAL SELECT2 JS -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/select2/select2.full.min.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- INTERNAL Data tables js-->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/datatable/js/jquery.dataTables.min.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/datatable/js/dataTables.bootstrap5.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/datatable/dataTables.responsive.min.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- INTERNAL APEXCHART JS -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/js/apexcharts.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/apexchart/irregular-data-series.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- INTERNAL Flot JS -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>

  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/flot/dashboard.sampledata.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- INTERNAL Vector js -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/jvectormap/jquery-jvectormap-2.0.2.min.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/jvectormap/jquery-jvectormap-world-mill-en.js">
    </script>
  <script type="text/javascript">
   
  </script>
   <!-- SIDE-MENU JS-->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/sidemenu/sidemenu.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- TypeHead js -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/plugins/bootstrap5-typehead/autocomplete.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/js/typehead.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- INTERNAL INDEX JS -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
 
  <script type="text/javascript">
  
  </script>
   <!-- Color Theme js -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/js/themeColors.js">
    </script>
  <script type="text/javascript">
    
  </script>
   <!-- CUSTOM JS -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/js/custom.js">
    </script>
  <script type="text/javascript">
  
  </script>
   <!-- Switcher js -->
   <noscript>
    <p>
    To display this page you need a browser that supports JavaScript.</p>
    </noscript>
  <script src="/assets/switcher/js/switcher.js">
    </script>
    <svg id="SvgjsSvg1001" width="2" height="0" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" style="overflow: hidden; top: -100%; left: -100%; position: absolute; opacity: 0;">
      <defs id="SvgjsDefs1002">
      </defs>
      <polyline id="SvgjsPolyline1003" points="0,0">
      </polyline>
      <path id="SvgjsPath1004" d="M0 0 ">
      </path>
      </svg>
   
  </div>
          <div class="jvectormap-tip">
            </div>
    
        </body>
        <grammarly-desktop-integration data-grammarly-shadow-root="true"></grammarly-desktop-integration>
</body>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script> -->

<script>
  var pages=1;
  var pageControl = [[${paging}]];
  $(window).on('load',function(){
    if($('#msg').html().length>0){
      $("#msg").css("display", "block");
      $("#msg").delay(6000).fadeOut(300);
  }
  })
  function ClearFilter() {
        $("#search-by-cond").val("");
        $("#take-record").val(10);
        SearchFilter(1);
    }
  $('body').delegate('.page-item', 'click', function () {
      var str = $(this).attr("data-page");
      var re = document.getElementsByClassName('page-item');
      for (var i = 0; i < re.length; i++) {
            $(re[i]).removeClass('active');
      }

      if (str == "prev" && pages >= 1) {

          if (pages == 1) {
              pages = 1;
              $('[data-page="page-1"]').addClass('active')
              
                  return;

          } else {
              pages -= 1;

          }

      } else if (str == "next" && pages <=pageControl) {
          if (pages ==pageControl) {
              pages = pageControl;
              $('[data-page="page-'+pages+'"]').addClass('active');
              return;
          } else {
              pages += 1;
          }


      }  else {
          if (pages == parseInt(str.replace("page-", ""))) {
              pages = -1;
          } else {
              pages = parseInt(str.replace("page-", ""));
          }
          $(this).addClass('active');
      }
      SearchFilter(pages,"");

      });
      function SearchFilter(page){
        var cond = $("#search-by-cond").val();
        var take = $("#take-record").val();
        if(take<0||take>100) {take=10; $("#take-record").val(1);}
        LoadData(page, cond, take);
      }
      $("#take-record").on('change',function(){
          SearchFilter(1);
      })
      $("#search-by-cond").on('keyup', function (e) {
      if (e.key === 'Enter' || e.keyCode === 13) 
          SearchFilter(1);
      });
      function LoadData( page, cond,take) {
      
      if (page > 0 && page <=pages) {
          var r = document.getElementsByClassName('table-item');
          while (r.length > 0) {
              r[0].parentNode.removeChild(r[0]);
          }
          var formDT = new FormData();
          formDT.append("p", page);
          formDT.append("cond", cond);
          formDT.append("take", take);
          window.history.pushState({}, null, '/admin/blogs/all'+`?page=${page}`)
          var row = page == 1 ? 1 : take * (page - 1) + 1;
          $.ajax({
              type: "POST",
              url: "/admin/blogs/all/LoadDataBlog",
              data: formDT,
              processData: false,
              contentType: false,
              success: function (data) {

                  for (var i = 0; i < data.length; i++) {
                        $("#data-table").append('<tr class="border-bottom odd table-item">'
                          +'<td class="text-center">'
                          +'<div class="mt-0 mt-sm-2 d-block"><h6 class="mb-0 fs-14 fw-semibold">'+row+'</h6></div>'
                          +'</td> <td> <div class="d-flex"> <div class="ms-3 mt-0 mt-sm-2 d-block"><h6 class="mb-0 fs-14 fw-semibold">'+data[i].title+'</h6></div></div>'
                          +'</td><td> <div class="d-flex"> <div class="mt-0 mt-sm-3 d-block"> <h6 class="mb-0 fs-14 fw-semibold">'+data[i].blogCate+'</h6>'
                          +'</div> </div> </td><td> <div class="d-flex"> <div class="mt-0 mt-sm-3 d-block"> <h6 class="mb-0 fs-14 fw-semibold" >'+data[i].created_at+'</h6>'
                          +'</div> </div> </td> <td><span class="fw-semibold mt-sm-2 d-block">'+(data[i].author_name)+'</span>'
                          +'</td> <td> <div class="mt-sm-1 d-block"> <span class="badge bg-success-transparent rounded-pill p-2 px-3 '+(data[i].status==1?'text-success':'')+'">'+(data[i].status==1?'Activated':'Deactivated')
                          +'</span> </div> </td> <td> <div class="g-2"> <a href="/admin/blogs/update?id='+data[i].id+'" class="btn text-primary btn-sm" data-bs-original-title="Edit">'
                          +'<span class="fe fe-edit fs-14">  </span> </a>  <span class="btn text-danger btn-sm" data-bs-original-title="Delete">'
                          +'<span class="fe fe-trash-2 fs-14"> </span> </span></div> </td> </tr>');
                            row = row + 1;
    
    
                          }
    
                  var f = new FormData();
                  f.append("cond", cond);

                  $.ajax({
                      type: "POST",
                      url: "/admin/blogs/all/GetCount/",
                      data: f,
                      processData: false,
                      contentType: false,
                      success: function (data) {
                          var fdt = new FormData();
                          fdt.append("i", data);
                          fdt.append("take", take);
                          $("#data-table_info").html("Showing "+(take>data?data:take)+" of "+data+" entries")

                          $.ajax({
                              type: "POST",
                              url: "/admin/blogs/all/RowEvent/",
                              data: fdt,
                              processData: false,
                              contentType: false,
                              success: function (dt) {
                                  var r = document.getElementsByClassName('page-item');
                                  while (r.length > 0) {
                                      r[0].parentNode.removeChild(r[0]);
                                  }
                                  var strs = "";
                                  pageControl=dt;
                                  for (var j = 1; j <= dt; j++) {
                                          strs += '<li class="paginate_button page-item '+(j == page?'active':'')+'" data-page="page-'+j+'"><span class="page-link">' + j + '</span></li>';
    
                                  }
                                  $("#paginations").append(' <li class="paginate_button page-item previous" id="data-table_previous" data-page="prev"><span  aria-controls="data-table" data-dt-idx="0" tabindex="0" class="page-link">Previous</span></li>' + strs + '<li class="paginate_button page-item next" id="data-table_next" data-page="next"><span aria-controls="data-table" data-dt-idx="2" tabindex="0" class="page-link">Next</span></li>');
    
                              }
                          });
    
                      }
    
                  });
              }
          });
        }
      }
    
</script>